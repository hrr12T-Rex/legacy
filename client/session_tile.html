
<div class="col s12 m6 l4" ng-if="!session.studentId || onProfile" ng-hide="session.UserId === getUserId() && !onProfile">
  <div class="card sessionTile">
    <div class="card-image waves-effect waves-block waves-light">
      <img class="activator" ng-if="session.img" ng-src="{{ session.img }}">
      <img class="activator" ng-if="!session.img" src="images/{{session.category}}.jpg">
    </div>
    <div class="card-content">
      <span class="card-title activator grey-text text-darken-4">{{session.topic}}<i class="material-icons right">more_vert</i></span>
      <div>
        <a href="{{session.link}}" ng-show="getLoggedIn() && (session.studentId === getUserId() || session.UserId === getUserId())">Join Dojo</a>
      </div>
    </div>
    <div class="card-reveal">
      <span class="card-title grey-text text-darken-4">{{session.topic}}<i class="material-icons right">close</i></span>
      <p><i>with {{session.User.username}}</i></p>
      <p>{{session.description}}</p>
      <p>{{session.startTime | date : 'MM/dd/yy, h:mm a' }} PST</span></p>
      <p ng-show="!session.free">${{session.price}}</p>
      <p ng-show="session.free">FREE</p>
      <a href="#/signin" ng-hide='getLoggedIn() || session.studentId'>Sign in to register</a>
      <a href="" class="register-link" ng-show="getLoggedIn() && !session.studentId" ng-click="initiateReg()">Register</a>
    </div>
  </div>
</div>

<div class="register" ng-show='registration === session.id'>
  <div class="card">
    <div class="close" ng-click="closeReg()">
      <i class="material-icons right">close</i>
    </div>
    <form id="checkout{{ session.id }}">
      <div id="payment-form{{ session.id }}"></div>
      <input type="hidden" name="payment_method_nonce" ng-model="nonce">
      <button type="submit" class="waves-effect waves-light btn right">Pay ${{ session.price }}</button>
    </form>
  </div>
</div>
